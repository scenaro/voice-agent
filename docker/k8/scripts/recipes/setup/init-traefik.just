# Install Traefik
k8-init-traefik: k8-require-env
  @echo "ğŸŒ Installing Traefik with Helm..."
  @echo "ğŸ“‹ Adding Traefik Helm repository..."
  helm repo add traefik https://traefik.github.io/charts
  helm repo update

  @echo "ğŸ“¦ Installing Traefik..."
  helm upgrade --install traefik traefik/traefik \
  --namespace traefik-system \
  --create-namespace \
  --values docker/k8/helm-chart/traefik-values.yml

  # Attendre que Traefik soit prÃªt
  @echo "â³ Attente du dÃ©marrage de Traefik..."
  kubectl wait --for=condition=ready --timeout=300s pod -l app.kubernetes.io/name=traefik -n traefik-system

  echo "ğŸ” VÃ©rification du Load Balancer..."
  kubectl get services -n traefik-system

  @echo ""
  @echo "âœ… Traefik installed! Dashboard will be available after ingress setup"